//Deixa a fita de Led Respirar atraves da medição de Millis
#include <FastLED.h>

#define NUM_LEDS 17
#define LED_PIN 5
#define LED_TYPE    WS2812

unsigned long int respira = 0;
int r = 0;
int e = NUM_LEDS - 1;
int estado = 0;

CRGB leds[NUM_LEDS];

void setup () {
  FastLED.addLeds<LED_TYPE, LED_PIN, GRB>(leds, NUM_LEDS);
  FastLED.setBrightness(250);

  }

void loop() {
  if(estado == 0){
  Respirando(100, 100);
  }
  if(estado == 1){
  gatilhado(10,10);
}
}
void Respirando( int inspira, int expira) {
  if(r < NUM_LEDS){
    if(millis() - respira >= inspira){
      Arcoiris(r);
      FastLED.show();
      respira += inspira;
      r += 1;
      }
    }
    if(r == NUM_LEDS){
      if(millis() - respira >= expira){
        leds[e] = CRGB::Black;
        FastLED.show();
        respira += expira;
        e -= 1;
        }
      }
      if(r == NUM_LEDS and e == 0){
        r = 0;
        e = 16;
      }
  } 
//Engatilhado
void gatilhado( int inspira, int expira) {
  if(r < NUM_LEDS){
    if(millis() - respira >= inspira){
      leds[r] = CRGB::CRGB::Red;
      FastLED.show();
      respira += inspira;
      r += 1;
      }
    }
    if(r == NUM_LEDS){
      if(millis() - respira >= expira){
        leds[e] = CRGB::Black;
        FastLED.show();
        respira += expira;
        e -= 1;
        }
      }
      if(r == NUM_LEDS and e == 0){
        r = 0;
        e = 16;
      }
  }

void Arcoiris(int r ){
  int intervalo = NUM_LEDS/7;
  if(r + 1 <= intervalo){
    leds[r] = CRGB::CRGB::Violet;
  }else if(r + 1 <= 2*intervalo){
    leds[r] = CRGB::Indigo;
    }else if(r + 1 <= 3*intervalo){
      leds[r] = CRGB::Cyan;
    }else if(r + 1 <= 4*intervalo){
      leds[r] = CRGB::Green;
    }else if (r + 1 <= 5*intervalo){
      leds[r] = CRGB::Yellow;
    }else if (r + 1 <= 6*intervalo){
      leds[r] = CRGB::Orange;
      }else if(r + 1 <= 7*intervalo){
      leds[r] = CRGB::Red;
     }
}
